const URL_BASE="http://localhost/gdagmcp",token=JSON.parse(localStorage.getItem("token"));let errores;async function iniciarApp(){errores=await traerErrores(),console.log(errores),dibujarErrores()}function alertas(){const t=document.querySelectorAll(".alert"),r=document.getElementById("alertas"),e=document.querySelector("#alertaTipo");t&&setTimeout(()=>{t.forEach((function(t){t.remove(),r&&(r.innerHTML=""),e&&(e.innerHTML="")}))},3e3)}function traerErrores(){return new Promise((t,r)=>{let e=[];$.ajax({data:{tipo:"errores"},url:URL_BASE+"/errores/datos",type:"POST",headers:{token:token},dataType:"json"}).done(r=>{r.exit&&Swal.fire({icon:"warning",title:r.exit,showConfirmButton:!1,text:"Sesi처n expirada, vuelva a iniciar sesi처n",timer:3e3}).then(()=>{window.location.href=URL_BASE+"/?r=8"}),0==r.length&&t(e),$.each(r,(a,o)=>{e.push(o),r.length==a+1&&t(e)})}).fail(t=>{r(t)})})}async function dibujarErrores(){var t="";let r=await traerErrores();t+='<h1 class="text-black mb-4"><strong>Administrar Errores</strong></h1>',t+='<table class="table" style="min-width:900px" id="tablaError">',t+='<thead class="table-dark">',t+='<tr class="" style="text-transform:uppercase">',t+="<th>N째</th>",t+='<th class="">Tabla Error</th>',t+='<th class="">Controlador Error</th>',t+='<th class="">Funci처n Error</th>',t+='<th class="">Error</th>',t+='<th class="">Fecha Error</th>',t+='<th class="">Status</th>',t+="</tr>",t+="</thead>",t+='<tbody class="contenido" id="contenido">',r.forEach((r,e)=>{console.log("error",r),t+="<tr>",t+="<td>"+(parseInt(e)+1)+"</td>",t+="<td>"+r.tabla_error+"</td>",t+="<td>"+r.controller_error+"</td>",t+="<td>"+r.function_error+"</td>",t+="<td>"+r.error+"</td>",t+="<td>"+r.created_at.split(" ")[0]+"</td>",t+="<td> Status</td>",t+="</tr>"}),t+="</tbody>",t+="</table>",document.getElementById("dibujar-js").innerHTML=t,$("#tablaError").DataTable()}document.addEventListener("DOMContentLoaded",iniciarApp());