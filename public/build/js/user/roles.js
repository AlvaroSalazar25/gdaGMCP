const URL_BASE="http://localhost/gdagmcp",token=JSON.parse(localStorage.getItem("token"));async function iniciarApp(){unidades=await traerUnidades(),console.log(unidades),dibujarUnidades()}function alertas(){const e=document.querySelectorAll(".alert"),t=document.getElementById("alertas"),a=document.querySelector("#alertaTipo");e&&setTimeout(()=>{e.forEach((function(e){e.remove(),t&&(t.innerHTML=""),a&&(a.innerHTML="")}))},3e3)}function traerUnidades(){return new Promise((e,t)=>{let a=[];$.ajax({data:{tipo:"unidadSeccion"},url:URL_BASE+"/user/datos",type:"POST",headers:{token:token},dataType:"json"}).done(t=>{t.exit&&Swal.fire({icon:"warning",title:t.exit,showConfirmButton:!1,text:"Sesión expirada, vuelva a iniciar sesión",timer:3e3}).then(()=>{window.location.href=URL_BASE+"/"}),$.each(t,(n,i)=>{a.push(i),t.length==n+1&&e(a)})}).fail(e=>{t(e)})})}function dibujarUnidades(){var e="";e+='<table class="table" style="min-width:900px" id="myTable">',e+='<thead class="table-dark">',e+='<tr class="" style="text-transform:uppercase">',e+="<th>N°</th>",e+="<th>Rol</th>",e+="<th>Permisos</th>",e+="<th>Acciones</th>",e+="</tr>",e+="</thead>",e+='<tbody class="contenido" id="contenido"></tbody>',roles.forEach((t,a)=>{e+='<tr class="">',e+="<td>"+(parseInt(a)+1)+"</p></td>",e+="<td>"+t.rol+"</p></td>";const n=JSON.parse(t.permisos);e+="<td>",e+='<ul class="">',n.forEach((t,a)=>{e+="<li>"+t.permiso+"</li>"}),e+="</ul>",e+="</td>",e+="<td>",e+='<div class="acciones-user">',e+='<a class="btn btn-warning botonAcciones botonEditar" id="'+t.id+'"  onclick="editarRol('+t.id+')"><i class="fa-solid fa-pen-to-square"></i></a>',e+='<a class="btn btn-danger botonAcciones" onclick="eliminarRol('+t.id+')"><i class="fa-solid fa-trash"></i></a>',e+="</div>",e+="</td>"}),console.log(roles),document.getElementById("dibujar-js").innerHTML=e}document.addEventListener("DOMContentLoaded",iniciarApp());